const peliculas = {
  "Amores perros": {
    titulo: "Amores perros",
    img: "amores-perros-poster.jpg",
    descripcion: "En la Ciudad de México, un accidente de tráfico conecta tres historias: Octavio, un adolescente, decide fugarse con Susana, su cuñada. Su perro Cofi se convierte en instrumento para conseguir el dinero y poder escapar. Al mismo tiempo, Daniel abandona a su familia para irse a vivir con Valeria, una modelo. El día que ambos festejan su nueva vida, el destino hace que Valeria sufra un accidente. Al lugar llega El Chivo, un exguerrillero que, tras varios años de cárcel, ahora es asesino a sueldo.",
    año: "2000",
    duracion: "150 min.",
    pais: "México",
    direccion: "Alejandro González Iñárritu",
    guion: "Guillermo Arriaga",
    clip: "https://www.youtube.com/embed/lmhzALdF0mU?si=1U0WX8yuOa9TtvS2",
  },
  "El ángel exterminador": {
    titulo: "El ángel exterminador",
    img: "angel-exterminador.png",
    descripcion: "Después de una cena en la mansión de los Nóbile, los invitados descubren que, por razones inexplicables, no pueden salir del lugar. Al prolongarse la situación durante varios días, la cortesía en el trato deja paso al más primitivo y brutal instinto de supervivencia. Una parábola sobre la descomposición de una clase social encerrada en sí misma. ",
    año: "1962",
    duracion: "90 min.",
    pais: "México",
    direccion: "Luis Buñuel",
    guion: "Luis Buñuel, Luis Alcoriza",
    clip: "https://www.youtube.com/embed/ysYG7qaz29c?si=OYeqDvhKxvfYjEc9",
  },
  Godzilla: {
    titulo: "Godzilla",
    img: "godzilla-poster.png",
    descripcion: "Esta cinta se filmó, principalmente, el Atlanta, Georgia en los Estados unidos pero la película incluye una secuencia ambientada en su totalidad en la CDMX donde se recrea el despertar de Rodán, enemigo de Godzilla. Esta secuencia está recreada sobre varias calles del Centro Histórico cercanas a la Plaza de Santo Domingo. ",
    año: "1998",
    duracion: "130 min.",
    pais: "Estados Unidos",
    direccion: "Roland Emmerich",
    guion: "Dean Devlin, Roland Emmerich. Historia: Ted Elliott, Terry Rossio, Dean Devlin, Roland Emmerich",
    clip: "https://www.youtube.com/embed/TAfd8SaG4T8?si=Va-fzu8Xswa5nUH7",
  },
  "Licencia para matar": {
    titulo: "Licencia para matar",
    img: "licencia-matar.jpg",
    descripcion: "El agente 007 a la caza y captura de un peligroso narcotraficante latinoamericano, con implicaciones personales de por medio: el capo de la droga mató a un amigo suyo, y Bond desea vengarse.",
    año: "1989",
    duracion: "135 min.",
    pais: "Reino Unido",
    direccion: "John Glen",
    guion: "Michael Wilson, Richard Maibaum. Personaje: Ian Fleming",
    clip: "https://www.youtube.com/embed/quHQAuO0lkg?si=dGzPjg4MRn7dGsHb",
  },
  Roma: {
    titulo: "Roma",
    img: "roma-poster.png",
    descripcion: "Cleo (Yalitza Aparicio) es la joven sirvienta de una familia que vive en la Colonia Roma, barrio de clase media-alta de Ciudad de México. En esta carta de amor a las mujeres que lo criaron, Cuarón se inspira en su propia infancia para pintar un retrato realista y emotivo de los conflictos domésticos y las jerarquías sociales durante la agitación política de la década de los 70.",
    año: "2018",
    duracion: "135 min.",
    pais: "México",
    direccion: "Alfonso Cuarón",
    guion: "Alfonso Cuarón",
    clip: "https://www.youtube.com/embed/IzqcQrFit24?si=cB6fpw9r5ZC-A5k1",
  },
  "Romeo + Julieta": {
    titulo: "Romeo + Julieta",
    img: "R-J-poster.png",
    descripcion: "En Verona Beach se suceden los enfrentamientos entre las dos familias más poderosas (los Montesco y los Capuleto), cuyo objetivo es conseguir el dominio de la ciudad. Fulgencio Capuleto organiza una fiesta a la que asiste, gracias a la mediación de su amigo Mercuccio, Romeo Montesco. Lo que los Capuleto pretenden es que su joven hija Julieta se comprometa con el arrogante Dave Paris, el hijo del gobernador. Pero, cuando Romeo y Julieta se miran, surgirá entre ellos desde el primer momento la chispa del amor. Adaptación moderna del clásico de Shakespeare.",
    año: "1996",
    duracion: "120 min.",
    pais: "Estados Unidos",
    direccion: "Baz Luhrmann",
    guion: "Craig Pearce, Baz Luhrmann. Obra: William Shakespeare",
    clip: "https://www.youtube.com/embed/ivbuYR2J-SI?si=K4nAhmUXuko4B0C6",
  },
  Spectre: {
    titulo: "Spectre",
    img: "Spectre-poster.png",
    descripcion: "James Bond recibe un críptico mensaje del pasado que le confía una misión secreta que lo lleva a México D.F. y a Roma, donde conoce a Lucía Sciarra, la hermosa viuda de un infame criminal. Bond se infiltra en una reunión secreta y descubre la existencia de una siniestra organización conocida como SPECTRE. Mientras tanto, en Londres, el nuevo director del Centro para la Seguridad Nacional cuestiona las acciones de Bond y pone en duda la importancia del MI6, encabezado por M. De modo encubierto Bond recluta a dos colaboradores para que le ayuden a encontrar a Madeleine Swann, la hija de su gran enemigo, el Sr. White, pues quizá tenga la clave para desentrañar el misterio de SPECTRE. A medida que Bond avanza en su investigación, descubre una estremecedora conexión entre él y el enemigo que busca.",
    año: "2015",
    duracion: "148 min.",
    pais: "Reino Unido",
    direccion: "Sam Mendes",
    guion: "John Logan, Neal Purvis, Robert Wade, Jez Butterworth. Personajes: Ian Fleming",
    clip: "https://www.youtube.com/embed/ashLaclKCik?si=UzCh_jJiWz6Gw-Cr",
  },
  "Vengador del futuro": {
    titulo: "Vengador del futuro",
    img: "total-recall-poster.png",
    descripcion: "La Tierra, año 2084. Doug Quaid, un hombre que lleva una vida aparentemente tranquila, vive atormentado por una pesadilla que todas las noches lo transporta a Marte. Decide entonces recurrir al laboratorio de Recall, una empresa de vacaciones virtuales que le ofrece la oportunidad de materializar su sueño gracias a un fuerte alucinógeno, pero la droga hace aflorar a su memoria una estancia verdadera en Marte cuando era el más temido agente del cruel Coohagen.",
    año: "1990",
    duracion: "109 min.",
    pais: "Estados Unidos",
    direccion: "Paul Verhoeven",
    guion: "Dan O'Bannon, Gary Goldman, Ronald Shusett. Relato: Philip K. Dick",
    clip: "https://www.youtube.com/embed/qJEgIxPkdB4?si=Uz6UWZkmlYUT-xau",
  },
};

function mostrarPelicula(nombrePelicula) {
  // Ocultar todo menos header y footer
  document.querySelectorAll(".swiper, .mapa-section").forEach((el) => {
    el.style.display = "none";
  });

  const data = peliculas[nombrePelicula];
  if (data) {
    const detalle = document.getElementById("detalle-pelicula");
    detalle.style.display = "block";
    detalle.querySelector(".contenido").innerHTML = `
                <div class="poster">
                    <h3>${data.titulo}</h3>
                    <img src="${data.img}" alt="${data.titulo}" style="max-width:400px; display:block; margin:10px 0;">
                </div>
                <div class="trailer-text">
                    <iframe width="800" height="600" src="${data.clip}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    <p>${data.descripcion}</p>
                    <p> <strong>Año:</strong> ${data.año}</p>
                    <p> <strong>Duraciónn:</strong> ${data.duracion}</p>
                    <p> <strong>País:</strong> ${data.pais}</p>
                    <p> <strong>Dirección:</strong> ${data.direccion}</p>
                    <p> <strong>Guión:</strong> ${data.guion}</p>
                </div>
            `;
  }
}

document.querySelectorAll(".list-down-content a").forEach((link) => {
  link.addEventListener("click", (e) => {
    e.preventDefault();
    const nombre = link.innerText.trim();
    mostrarPelicula(nombre);
  });
});
document.getElementById("home").addEventListener("click", () => {
  document.querySelectorAll("header, .swiper, .mapa-section, footer").forEach(el => el.style.display = "");
  document.getElementById("detalle-pelicula").style.display = "none";
});


// Vincular los slides del carrusel con la función mostrarPelicula
document.querySelectorAll(".swiper-slide img").forEach((img) => {
  img.addEventListener("click", () => {
    // Intentar obtener el nombre de la película a partir del atributo alt o del nombre del archivo
    let nombre = img.alt.trim();

    if (!nombre) {
      // Si no tiene alt, inferirlo del nombre del archivo
      const src = img.src.split("/").pop().replace(".jpg", "").replace(".png", "");
      nombre = src
        .replace(/-/g, " ") // reemplaza guiones por espacios
        .replace(/\b\w/g, (l) => l.toUpperCase()); // capitaliza cada palabra
    }

    // Si el nombre coincide con una película, mostrarla
    if (peliculas[nombre]) {
      mostrarPelicula(nombre);
    } else {
      console.warn("Película no encontrada en el objeto:", nombre);
    }
  });
});

function buscar() {
  const input = document.getElementById("searchInput").value.toLowerCase().trim();
  const detalle = document.getElementById("detalle-pelicula");
  const contenido = detalle.querySelector(".contenido");

  // Datos de ejemplo: puedes personalizarlos o cargarlos desde un JSON
  const peliculas = [{
      titulo: "Amores perros",
      imagen: "amores-perros-poster.jpg",
      descripcion: "En la Ciudad de México, un accidente de tráfico conecta tres historias: Octavio, un adolescente, decide fugarse con Susana, su cuñada. Su perro Cofi se convierte en instrumento para conseguir el dinero y poder escapar. Al mismo tiempo, Daniel abandona a su familia para irse a vivir con Valeria, una modelo. El día que ambos festejan su nueva vida, el destino hace que Valeria sufra un accidente. Al lugar llega El Chivo, un exguerrillero que, tras varios años de cárcel, ahora es asesino a sueldo.",
      trailer: "https://www.youtube.com/embed/lmhzALdF0mU?si=dCqfNwmjFHWllsEq"
    },
    {
      titulo: "El ángel exterminador",
      imagen: "angel-exterminador.png",
      descripcion: "Después de una cena en la mansión de los Nóbile, los invitados descubren que, por razones inexplicables, no pueden salir del lugar. Al prolongarse la situación durante varios días, la cortesía en el trato deja paso al más primitivo y brutal instinto de supervivencia. Una parábola sobre la descomposición de una clase social encerrada en sí misma.",
      trailer: "https://www.youtube.com/embed/ysYG7qaz29c?si=D3Pru_qTc8TXWLSl"
    },
    {
      titulo: "Roma",
      imagen: "roma-poster.png",
      descripcion: "Cleo (Yalitza Aparicio) es la joven sirvienta de una familia que vive en la Colonia Roma, barrio de clase media-alta de Ciudad de México. En esta carta de amor a las mujeres que lo criaron, Cuarón se inspira en su propia infancia para pintar un retrato realista y emotivo de los conflictos domésticos y las jerarquías sociales durante la agitación política de la década de los 70.",
      trailer: "https://www.youtube.com/embed/IzqcQrFit24?si=Ur-TpDTgxWFNR1ea"
    },
    {
      titulo: "Godzilla",
      imagen: "godzilla-poster.png",
      descripcion: "Esta cinta se filmó, principalmente, el Atlanta, Georgia en los Estados unidos pero la película incluye una secuencia ambientada en su totalidad en la CDMX donde se recrea el despertar de Rodán, enemigo de Godzilla. Esta secuencia está recreada sobre varias calles del Centro Histórico cercanas a la Plaza de Santo Domingo. ",
      trailer: "https://www.youtube.com/embed/TAfd8SaG4T8?si=i_oxdEeBFiN_jfq7"
    }
  ];

  // Buscar coincidencia
  const resultado = peliculas.find(p =>
    p.titulo.toLowerCase().includes(input)
  );

  if (resultado) {
    // Mostrar solo la sección de detalle
    document.querySelectorAll("header, .swiper, .mapa-section, footer").forEach(el => el.style.display = "none");
    detalle.style.display = "block";

    // Rellenar contenido
    contenido.innerHTML = `
      <h2>${resultado.titulo}</h2>
      <img src="${resultado.imagen}" alt="${resultado.titulo}" class="img-detalle">
      <p>${resultado.descripcion}</p>
      <iframe width="560" height="315" src="${resultado.trailer}" 
        title="Trailer de ${resultado.titulo}" frameborder="0" allowfullscreen></iframe>
    `;
  } else {
    alert("No se encontró la película.");
  }
}


document.getElementById("searchInput").addEventListener("keyup", function (event) {
  if (event.key === "Enter") {
    buscar();
  }
});


/* ***************** */
const dataLugares = {
  zona1: {
    titulo: "Spectre",
    texto: "Esta producción es el vivo ejemplo de que la CDMX ha sido escenario para el cine internacional. La famosa escena de apertura de Spectre (2015) del agente James Bond en el festival de Día de Muertos se rodó en la plaza del Zócalo de la Ciudad de México y alrededores del Centro Histórico. En la producción se requirió cerrar el Zócalo y calles adyacentes: se usaron más de 1 500 extras, alrededor de 10 esqueletos gigantes y 250 000 flores de papel, para recrear el desfile masivo de Muertos que se ve en la película. La filmación tuvo un impacto tan grande que, poco después, la Ciudad de México determinó realizar su propio desfile del Día de Muertos, basado directamente en la película. Desde ese momento, la celebración se lleva a cabo anualmente, convocando a miles de turistas tanto locales como de otros países. Lo que inició como una secuencia de ficción se transformó en una tradición reciente, evidenciando de qué manera el cine puede cambiar la realidad de una ciudad.",
    imagenes: [
      "Spectre-poster.png",
      "Esenario-Spectre.png",
      "spectre-still.png",
    ]
  },
  zona2: {
    titulo: "Godzilla",
    texto: "Esta cinta se filmó, principalmente, el Atlanta, Georgia en los Estados unidos pero la película incluye una secuencia ambientada en su totalidad en la CDMX donde se recrea el despertar de Rodán, enemigo de Godzilla. Esta secuencia está recreada sobre varias calles del Centro Histórico cercanas a la Plaza de Santo Domingo. Para alcanzar ese objetivo, el grupo fusionó grabaciones auténticas del entorno con efectos digitales de gran magnitud, prestando atención a cada elemento para que la arquitectura colonial y los tonos del centro de la ciudad se mezclaran de forma natural en la escena. A pesar de que muchas de las imágenes se realizaron en estudio, se emplearon referencias visuales genuinas de la ciudad para preservar su esencia y aportar un carácter realista al instante en que el monstruo despierta.  ",
    imagenes: [
      "godzilla-poster.png",
      "film.png"
    ]
  },
  zona3: {
    titulo: "Roma",
    texto: "La película se filmó en la calle Tepeji 22, en la colonia Roma, un barrio con una larga historia y una identidad muy ligada a la vida cotidiana de la Ciudad de México. La casa elegida conserva la arquitectura típica de la zona, con fachadas antiguas y detalles que evocan el ambiente de los años setenta. Durante la filmación, la producción ambientó toda la calle para recrear la época: colocaron autos antiguos, letreros y objetos de la vida diaria de aquel tiempo. Los vecinos observaron de cerca el proceso, y muchos de ellos colaboraron o sirvieron como extras, lo que dio al rodaje un aire de comunidad y cercanía.",
    imagenes: [
      "ubica-roma.jpg",
      "roma-poster.png",
      "rom.png"
    ]
  },
  zona4: {
    titulo: "Vengador del Futuro",
    texto: "Gran parte de esta cinta se filmó en los Estudios Churubusco; no obstante, muchas de las locaciones de la película se filmaron en las instalaciones del Metro Chabacano. Por otro lado, hay una secuencia que ocurre en la Glorieta de los Insurgentes. Esta locación permitió mostrar la energía y el bullicio del centro de la capital, contrastando con los espacios controlados del estudio y el metro. La combinación de estos escenarios ayudó a que la película mostrara distintos rostros de la Ciudad de México, mezclando ficción y realidad de manera convincente. ",
    imagenes: [
      "total-recall-poster.png",
      "total-recall-still-1.png",
      "total-recall-still-2.png",
      "total-recall-still-3.png",
      "total-recall-still-4.png"
    ]
  },
  zona5: {
    titulo: "Romeo y Julieta",
    texto: "Aunque la película está supuestamente ambientada en la ciudad de Verona en Italia, la mayoría de las secuencias se filmaron en la CDMX. La secuencia de la boda y la muerta de ambos protagonistas se filmó en el interior de la Parroquia del Purísimo Corazón de Jesús en la colonia Del Valle. Durante los días de rodaje, el templo se llenó de luces, cámaras y equipo técnico, mientras se cuidaban los ángulos y la ambientación para lograr una estética que recordara a la Verona original. Con el tiempo, la iglesia se convirtió en un punto de interés para los seguidores de la película, que la reconocen como uno de los escenarios más representativos del rodaje en la ciudad. ",
    imagenes: [
      "R-J-poster.png",
      "R-J-still-1.png",
      "R-J-still-2.png",
      "R-J-still-3.png",
      "R-J-still-4.png"
    ]
  },
  zona6: {
    titulo: "Amores perros",
    texto: "La icónica escena del choque que entrelaza las tres historias de la película se filmó en el cruce de las calles Juan Escutia y Atlixco, en la colonia La Condesa de la Ciudad de México. En esa secuencia se emplearon nueve cámaras simultáneas para capturar el impacto desde distintos ángulos. La realización de la película se llevó a cabo tras una meticulosa planificación. Se realizaron múltiples prácticas con los vehículos, los especialistas en acrobacias y el personal técnico para asegurar que todo se ejecutara con exactitud y seguridad. También se reguló el tráfico y la iluminación en la locación para lograr el ambiente ideal. El resultado fue una de las secuencias más memorables del cine mexicano contemporáneo, no solo por su impacto visual, sino porque señala el momento preciso en que los caminos de los personajes se encuentran.",
    imagenes: [
      "ubica-amor.jpg",
      "amores-perros-poster.jpg",
      "choque-perros.jpg"
    ]
  }
};

const pins = document.querySelectorAll(".pin");

pins.forEach(pin => {
  pin.addEventListener("click", () => {
    const lugar = pin.dataset.lugar;
    const info = dataLugares[lugar];

    document.getElementById("titulo-lugar").innerText = info.titulo;
    document.getElementById("texto-lugar").innerText = info.texto;

    const galeria = document.getElementById("galeria-lugar");
    galeria.innerHTML = info.imagenes
      .map(img => `<img src="${img}" alt="">`)
      .join("");


    document.getElementById("map-section").style.display = "none";
    document.querySelector(".swiper").style.display = "none";
    document.querySelector(".mySwiper2").style.display = "none";
    document.getElementById("detalle-lugar").style.display = "block";
  });
});

document.getElementById("btnVolverMapa").addEventListener("click", () => {
  document.getElementById("detalle-lugar").style.display = "none";
  document.getElementById("map-section").style.display = "flex";
  document.querySelector(".swiper").style.display = "block";
  document.querySelector(".mySwiper2").style.display = "block";
});